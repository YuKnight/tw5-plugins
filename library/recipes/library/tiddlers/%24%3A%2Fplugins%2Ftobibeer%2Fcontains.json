{
    "title": "$:/plugins/tobibeer/contains",
    "description": "Filter titles/listfields containing a value or any/all values from a list",
    "author": "Tobias Beer",
    "version": "0.5.0",
    "core-version": ">=5.1.9",
    "source": "https://github.com/tobibeer/tw5-contains",
    "documentation": "https://tobibeer.github.io/tw5-contains",
    "plugin-type": "plugin",
    "dependents": "",
    "list": "readme",
    "type": "application/json",
    "text": "{\n    \"tiddlers\": {\n        \"$:/plugins/tobibeer/contains/filters/contains.js\": {\n            \"text\": \"/*\\\\\\r\\ntitle: $:/plugins/tobibeer/contains/filters/contains.js\\r\\ntype: application/javascript\\r\\nmodule-type: filteroperator\\r\\n\\r\\nFilters input titles as to whether they (or their fields) contain\\r\\na value or any/all values specified in the operand\\r\\n\\r\\n\\\\*/\\r\\n(function(){\\r\\n\\r\\n/*jslint node: true, browser: true */\\r\\n/*global $tw: false */\\r\\n\\\"use strict\\\";\\r\\n\\r\\n/*\\r\\nExport filter function\\r\\n*/\\r\\nexports.contains = function(source,operator,options) {\\r\\n\\tvar field,list,mode,\\r\\n\\t\\tall =true,\\r\\n\\t\\ttitles = [],\\r\\n\\t\\tresults = [],\\r\\n\\t\\tvalue = operator.operand;\\r\\n\\r\\n\\t$tw.utils.each(\\r\\n\\t\\t(operator.suffix || \\\"\\\").split(\\\" \\\"),\\r\\n\\t\\tfunction(s) {\\r\\n\\t\\t\\tif(s) {\\r\\n\\t\\t\\t\\tif(s.substr(0,1) === \\\"$\\\"){\\r\\n\\t\\t\\t\\t\\tmode = s.substr(1);\\r\\n\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\tfield = s;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t);\\r\\n\\tvalue = mode ? $tw.utils.parseStringArray(value) : value;\\r\\n\\tif(!field) {\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\ttitles.push(title);\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\tswitch(mode) {\\r\\n\\t\\tcase \\\"any\\\":\\r\\n\\t\\t\\tif(field) {\\r\\n\\t\\t\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\t\\t\\tlist = options.wiki.getTiddlerList(title,field);\\r\\n\\t\\t\\t\\t\\t$tw.utils.each(value,function(t) {\\r\\n\\t\\t\\t\\t\\t\\tif(list.indexOf(t) > -1) {\\r\\n\\t\\t\\t\\t\\t\\t\\tresults.push(title);\\r\\n\\t\\t\\t\\t\\t\\t\\treturn false;\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t});\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t$tw.utils.each(value,function(t) {\\r\\n\\t\\t\\t\\t\\tif(titles.indexOf(t) > -1) {\\r\\n\\t\\t\\t\\t\\t\\tresults = titles;\\r\\n\\t\\t\\t\\t\\t\\treturn false;\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tbreak;\\r\\n\\t\\tcase \\\"all\\\":\\r\\n\\t\\t\\tif(field) {\\r\\n\\t\\t\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\t\\t\\tlist = options.wiki.getTiddlerList(title,field);\\r\\n\\t\\t\\t\\t\\tall = true;\\r\\n\\t\\t\\t\\t\\t$tw.utils.each(value,function(t) {\\r\\n\\t\\t\\t\\t\\t\\tall = all && list.indexOf(t) > -1;\\r\\n\\t\\t\\t\\t\\t\\tif(!all) {\\r\\n\\t\\t\\t\\t\\t\\t\\treturn false;\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t});\\r\\n\\t\\t\\t\\t\\tif(all) {\\r\\n\\t\\t\\t\\t\\t\\tresults.push(title);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t$tw.utils.each(value,function(t) {\\r\\n\\t\\t\\t\\t\\tall = all && titles.indexOf(t) > -1;\\r\\n\\t\\t\\t\\t\\tif(!all) {\\r\\n\\t\\t\\t\\t\\t\\treturn false;\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t\\tif(all) {\\r\\n\\t\\t\\t\\t\\tresults = titles;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tbreak;\\r\\n\\t\\tdefault:\\r\\n\\t\\t\\tif(field) {\\r\\n\\t\\t\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\t\\t\\tlist = options.wiki.getTiddlerList(title,field);\\r\\n\\t\\t\\t\\t\\tif(list.indexOf(value) > -1) {\\r\\n\\t\\t\\t\\t\\t\\tresults.push(title);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t} else {\\r\\n\\t\\t\\t\\tif(titles.indexOf(value) > -1) {\\r\\n\\t\\t\\t\\t\\tresults = titles;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t}\\r\\n\\treturn results;\\r\\n};\\r\\n\\r\\n})();\",\n            \"title\": \"$:/plugins/tobibeer/contains/filters/contains.js\",\n            \"type\": \"application/javascript\",\n            \"module-type\": \"filteroperator\"\n        },\n        \"$:/plugins/tobibeer/contains/readme\": {\n            \"title\": \"$:/plugins/tobibeer/contains/readme\",\n            \"text\": \"\\\\define intro(which) <br>&nbsp;&nbsp;&nbsp;//@@color:grey;returns $which$...@@//\\r\\n\\\\define case(code, summary)\\r\\n//@@color:grey;$summary$:@@//<br>\\r\\n`$code$`\\r\\n\\\\end\\n\\nProvides the ''contains[]'' [[filter operator|http://tiddlywiki.com#Filters]] returning those titles where the title or titles in a list field contain a value or any/all values from another list.\\n\\n; documentation / examples / demos...\\r\\n: http://tobibeer.github.io/tw5-plugins#contains\\r\\n; variants\\r\\n: ''compare input titles against title(s) in the operand:''<<intro \\\"all ''input titles'', unmodified, if the input titles\\\">><ul style=\\\"margin:0;\\\">\\r\\n<li><<case \\\"contains[<value>]\\\" \\\"contain ''&lt;value>''\\\">></li>\\r\\n<li><<case \\\"contains:$any[<list>]\\\" \\\"contain ''any'' titles in ''&lt;list>''\\\">></li>\\r\\n<li><<case \\\"contains:$all[<list>]\\\" \\\"contain ''all'' titles in ''&lt;list>''\\\">></li>\\r\\n</ul>\\r\\n: ''compare list fields of input titles against title(s) in the operand:''<<intro \\\"those input titles where the ''&lt;listfield>''\\\">><ul style=\\\"margin:0;\\\">\\r\\n<li><<case \\\"contains:<listfield>[<value>]\\\" \\\"contains ''&lt;value>''\\\">></li>\\r\\n<li><<case \\\"contains:<listfield> $any[<list>]\\\" \\\"contains ''any'' titles in ''&lt;list>''\\\">></li>\\r\\n<li><<case \\\"contains:<listfield> $all[<list>]\\\" \\\"contains ''all'' titles in ''&lt;list>''\\\">></li>\\r\\n</ul>\"\n        }\n    }\n}"
}